@using Trucks.Web.Common.App.Extensions
@using Trucks.Web.Controllers
@model Trucks.Web.Models.Customers.CreateModel

@{
    Html.EnableClientValidation(true);
    Html.EnableUnobtrusiveJavaScript(true);
}

<div id="form">
    <div class="modal fade" id="createCustomerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <section>
                            @Html.LabelFor(c => c.Name)
                            <div class="form-group">
                                <input data-val="true" data-val-required="Введите свое имя" type="text" name="@Html.NameFor(m => m.Name)" class="input-default" />
                                @Html.ValidationMessageFor(m => m.Name, "", new { @class = "text-danger" })
                            </div>
                        </section>
                        <section>
                            @Html.LabelFor(c => c.Surname)
                            <div class="form-group">
                                <input type="text" name="@Html.NameFor(m => m.Surname)" class="input-default" />
                                @Html.ValidationMessageFor(m => m.Surname, "", new { @class = "text-danger" })
                            </div>
                        </section>
                        <section>
                            @Html.LabelFor(c => c.PhoneNumber)
                            <div class="form-group">
                                <input type="text" name="@Html.NameFor(m => m.PhoneNumber)" class="input-default" />
                                @Html.ValidationMessageFor(m => m.PhoneNumber, "", new { @class = "text-danger" })
                            </div>
                        </section>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <section>
                        <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/Scripts/app/modules/customers/create/bundle")
<script>
    $(function() {
        new customers.create.CreateView(
            {
                createUrl: "@(Html.BuildUrlFromExpression<CustomersController>(c => c.Create(null)))"
            }).render();

        //$("#form").validate({
        //    errorClass: "input-error",
        //    errorElement: "div",

        //    errorPlacement: function (error, e) {  
        //        e.parents('.form-group > section').append(error);  
        //    },

        //    highlight: function (element) {
        //        $(element).closest(".form-group").addClass("input-error");
        //    },

        //    unhighlight: function (element) {
        //        $(element).closest(".form-group").removeClass("input-error");
        //    },

        //    rules: {
        //        "Name": {
        //            required: true
        //        },
        //        "Surname": {
        //            required: true
        //        },
        //        "PhoneNumber": {
        //            required: true
        //        }
        //    },

        //    messages: {
        //        Name: "Please enter name",
        //        Surname: "Please enter surname",
        //        PhoneNumber: "Please enter phoneNumber",
        //    }
        //});
    });
</script>